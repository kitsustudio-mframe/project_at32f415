/**
 * Copyright (c) 2020 ZxyKira
 * All rights reserved.
 * 
 * SPDX-License-Identifier: MIT
 */

/* ****************************************************************************************
 * Include
 */  

//-----------------------------------------------------------------------------------------
#include "lang/package-info.h"
#include "hal/package-info.h"
#include "util/package-info.h"
#include "at32f415/package-info.h"

//-----------------------------------------------------------------------------------------

/* ****************************************************************************************
 * Using
 */
 
//-----------------------------------------------------------------------------------------
using namespace at32f415::core;

//-----------------------------------------------------------------------------------------

/* ****************************************************************************************
 * Extern
 */

/* ****************************************************************************************
 * Class
 */

/* ****************************************************************************************
 * Variable
 */

static hal::GeneralPin* led[8];

/* ****************************************************************************************
 * Method
 */

//-----------------------------------------------------------------------------------------
void setup(Thread* _this){
  for(uint32_t i=0; i<8; ++i){
    led[i] = new CoreGeneralPin(Core::gpiob, i);
    led[i]->setOutput();
    led[i]->setLow();
  }
  System::out() << "init\n";
  System::out() << "thread name: " << _this->getThreadName() << '\n';
  System::out() << "system clock: " << static_cast<int>(System::getCoreClock()) << '\n';
  _this->delay(100);
  

}

//-----------------------------------------------------------------------------------------
void loop(Thread* _this){
  for(int i=0; i<8; ++i){
    led[i]->setToggle();
    _this->delay(100);
  }
}

/* ****************************************************************************************
 * End of file
 */ 
